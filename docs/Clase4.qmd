---
title: "Clase 4: Uso de landscapemetrics"
format: html
editor: visual
---

```{r, warning=FALSE, message=FALSE}
library(tidyverse)
library(landscapemetrics)
library(terra)
library(sf)
library(ggthemes)
library(ggspatial)
```

::: panel-tabset

## Cargar base de datos y raster

-   Cargar vector

```{r}
PuntosConteo <- st_read("data/Point_counts.gpkg")
```

-   Cargar Rater

```{r}
CoberturaYoro <- rast("data/ClasificacionYoro.tif")
```

-   Revisar proyeccion de capas

```{r}
st_crs(PuntosConteo) ==  st_crs(CoberturaYoro)
```

-   Visualizar ambas capas

```{r}
plot(CoberturaYoro)
plot(PuntosConteo["Site"], add= TRUE)
```


```{r}
Yoro_df <- as.data.frame(CoberturaYoro, xy = TRUE)


ggplot()+
  geom_raster(data= Yoro_df, aes(x=x, y=y, fill= ClasificacionYoro))+
  geom_sf(data= PuntosConteo) +
  theme_map()

```

## Uso de landscape metrics

[LandscapeMetrics](https://r-spatialecology.github.io/landscapemetrics/)

landscapemetrics is a R package for calculating landscape metrics for categorical landscape patterns in a tidy workflow. The package can be used as a drop-in replacement for FRAGSTATS (McGarigal et al. 2023), as it offers a reproducible workflow for landscape analysis in a single environment. It also allows for calculations of four theoretical metrics of landscape complexity: a marginal entropy, a conditional entropy, a joint entropy, and a mutual information (Nowosad and Stepinski 2019).

- Primero seleccionaremos las metricas de paisaje a estimar

```{r}
head(landscapemetrics::lsm_abbreviations_names)

metric_explore1 <- c('lsm_c_ca')
```

- Estimamos nuestras metricas aplicadas a la capa raster

```{r}

check_landscape(CoberturaYoro)

YoroPaisaje <- calculate_lsm(landscape = CoberturaYoro, what = metric_explore1)

```


```{r}
YoroPaisaje
```


:::

![HN Biology Investigation Academy](HN%20Cursos%20publicidad/HN%20Biology%20Inv%20large.jpg)
